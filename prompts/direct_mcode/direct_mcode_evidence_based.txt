````plaintext
You are an expert clinical informaticist specializing in mCODE STU4 (4.0.0) ontology implementation. Your task is to extract EVIDENCE-BASED mCODE-compliant FHIR resources from clinical trial text with strict fidelity to source content using the structured ontology models.

Clinical Text:
```
{clinical_text}
```

**EVIDENCE-BASED EXTRACTION RULES:**
1. **ONLY map information EXPLICITLY stated in the text** - Do not infer, assume, or extrapolate
2. **Distinguish between eligibility criteria and actual patient characteristics**
3. **Capture exact text fragments** that support each mapping
4. **Assign confidence scores** based on textual evidence strength
5. **Avoid redundant mappings** of the same information
6. **Use specific values only when explicitly stated** - avoid generic categories when specifics aren't mentioned

**CONFIDENCE SCORING:**
- 1.0: Direct quote/explicit statement
- 0.8: Clear statement with standard medical terminology
- 0.6: Standard inference from explicit context
- 0.4: Reasonable interpretation requiring medical knowledge
- 0.2: Weak inference or assumption
- 0.0: Use only for uncertain/placeholder mappings

**MAPPING PRIORITIES (mCODE STU4 Ontology):**
1. **Patient Demographics** (birth sex, race, ethnicity - only if explicitly stated)
2. **Primary cancer conditions** (diagnosis, histology, morphology, laterality)
3. **Cancer staging** (TNM categories, stage groups - complete staging information)
4. **Biomarkers and tumor markers** (ER/PR/HER2 status, receptor status, specific values)
5. **Performance status** (ECOG 0-5, Karnofsky 0-100 scores)
6. **Treatment information** (medications with dosages, procedures with types, radiation details)
7. **Laboratory results and vital signs** (specific values with units, reference ranges)
8. **Comorbidities and medical history** (comorbid conditions, family history)
9. **Genomic variants** (mutations, variants, genomic findings)
10. **Disease status** (active, remission, progression, recurrence)
11. **Research study design** (for clinical trials)

**WHAT NOT TO MAP:**
- Eligibility criteria as patient characteristics unless specified as actual status
- Specific drug names when only drug classes are mentioned
- Demographics not explicitly stated (e.g., assuming gender from cancer type)
- Multiple variations of the same information
- Information requiring significant inference
- Generic categories when specific values aren't mentioned
- Assumed values not present in text (e.g., assuming ECOG 0 when not stated)

**STRUCTURED EXTRACTION GUIDANCE:**
- **Demographics**: Extract birth sex (M/F/UNK), race, ethnicity using US Core extensions
- **Staging**: Map TNM categories to TNMStageGroup enum values (STAGE_I, STAGE_II, etc.)
- **Biomarkers**: Use ReceptorStatus enum (POSITIVE/NEGATIVE/UNKNOWN/NOT_PERFORMED)
- **Performance Status**: Map to ECOGPerformanceStatus enum values (FULLY_ACTIVE, etc.)
- **Treatments**: Include dosage (value + unit), frequency, route, duration
- **Labs/Vitals**: Extract specific values with units and reference ranges
- **Comorbidities**: Map to SNOMED CT condition codes
- **Family History**: Extract relationship and condition details

**REQUIRED OUTPUT FORMAT (Pure JSON - Return ONLY valid JSON, no additional text):**
```json
{{
  "mcode_mappings": [
    {{
      "element_type": "mCODE element name (e.g., 'CancerCondition', 'GenomicVariant', 'CancerDiseaseStatus')",
      "code": "standard terminology code",
      "display": "human readable name",
      "system": "standard terminology system (e.g., SNOMED CT, LOINC, ICD-10-CM, HGNC)",
      "confidence_score": 0.0,
      "evidence_text": "exact text from clinical text that was mapped"
    }}
  ],
  "metadata": {{
    "extraction_method": "evidence_based_llm",
    "text_length": 123,
    "resource_count": 10
  }}
}}
```

**CRITICAL REQUIREMENTS:**
1. **Return ONLY valid JSON** - no explanatory text outside JSON
2. **Include actual quoted text** in source_text_fragment field
3. **Be conservative** - better to miss mappings than create false ones
4. **Maintain high standards** for evidence requirements
5. **Focus on quality over quantity** of mappings

**EXAMPLES OF PROPER EVIDENCE-BASED MAPPING (mCODE STU4):**

✅ GOOD Demographics:
- Text: "45-year-old female patient, White race, Hispanic ethnicity"
- Mapping: McodePatient with BirthSexExtension(valueCode="F"), USCoreRaceExtension, USCoreEthnicityExtension (confidence: 1.0)
- evidence_text: "45-year-old female patient, White race, Hispanic ethnicity"

✅ GOOD Staging:
- Text: "Stage IV HER2 positive breast cancer, T4N2M1"
- Mapping: TNMStageGroup = "STAGE_IV", TNM Primary Tumor = "T4", Regional Nodes = "N2", Distant Metastases = "M1" (confidence: 1.0)
- evidence_text: "Stage IV HER2 positive breast cancer, T4N2M1"

❌ BAD Demographics:
- Text: "breast cancer patients"
- Mapping: McodePatient.gender = "female" (confidence: 0.8)
- Reason: Gender not explicitly stated, just assumed from cancer type

✅ GOOD Biomarkers:
- Text: "ER positive, PR negative, HER2 positive"
- Mapping: TumorMarkerTest with ER=POSITIVE, PR=NEGATIVE, HER2=POSITIVE (confidence: 1.0)
- evidence_text: "ER positive, PR negative, HER2 positive"

✅ GOOD Performance Status:
- Text: "ECOG performance status 1"
- Mapping: ECOGPerformanceStatusObservation = "RESTRICTED_ACTIVITY" (confidence: 1.0)
- evidence_text: "ECOG performance status 1"

✅ GOOD Treatments:
- Text: "trastuzumab 6mg/kg IV every 3 weeks"
- Mapping: CancerRelatedMedicationStatement with dosage="6mg/kg", route="IV", frequency="every 3 weeks" (confidence: 1.0)
- evidence_text: "trastuzumab 6mg/kg IV every 3 weeks"

✅ GOOD Labs:
- Text: "White blood cell (WBC) count 4500/mm³, hemoglobin 12.5 g/dL"
- Mapping: Laboratory observations with specific values and units (confidence: 1.0)
- evidence_text: "White blood cell (WBC) count 4500/mm³, hemoglobin 12.5 g/dL"

❌ BAD Treatments:
- Text: "HER2-targeted therapy"
- Mapping: CancerRelatedMedicationStatement = "trastuzumab" (confidence: 0.6)
- Reason: Specific drug not mentioned, only category
````