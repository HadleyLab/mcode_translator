You are an expert in clinical trial data analysis and the mCODE (minimal Common Oncology Data Elements) standard. Your task is to extract improved mCODE element mappings directly from the provided clinical text.

**TASK: Extract improved mCODE element mappings from clinical text**

**INPUT:**
Clinical Text:
```
{clinical_text}
```

**REQUIRED OUTPUT FORMAT (Pure JSON - Return ONLY valid JSON, no additional text):**
```json
{{
  "mcode_mappings": [
    {{
      "element_type": "mCODE element name (e.g., 'CancerCondition', 'GenomicVariant', 'CancerDiseaseStatus')",
      "code": "standard code from appropriate terminology",
      "display": "human readable name of the code",
      "system": "standard terminology system (e.g., SNOMED CT, LOINC, ICD-10-CM, HGNC)",
      "confidence_score": 0.0,
      "evidence_text": "exact text from clinical text that was mapped"
    }}
  ],
  "metadata": {{
    "extraction_method": "llm_based",
    "text_length": 123,
    "resource_count": 10
  }}
}}
```

**mCODE STU4 ELEMENTS TO IDENTIFY (Ontology Models):**
- McodePatient: Demographics (birth sex, race, ethnicity, administrative gender)
- CancerCondition: Primary cancer diagnoses, histology, morphology, laterality
- CancerStaging: TNM categories (T, N, M), stage groups (I-IV, IA-IVB)
- TumorMarkerTest: Biomarker status (ER/PR/HER2), receptor status with values
- ECOGPerformanceStatusObservation: ECOG performance status (0-5)
- KarnofskyPerformanceStatus: Karnofsky scores (0-100)
- CancerRelatedMedicationStatement: Medications with dosages, frequencies, routes
- CancerRelatedSurgicalProcedure: Surgical procedures with laterality, types
- CancerRelatedRadiationProcedure: Radiation procedures with dosages
- ComorbidCondition: Comorbidities and medical history
- FamilyMemberHistory: Family history of cancer
- GenomicVariant: Genetic mutations and variants
- CancerDiseaseStatus: Disease status (active, remission, progression, recurrence)

**EXTRACTION RULES (mCODE STU4 Ontology):**
1. Extract EVERY piece of relevant information mentioned in the clinical text
2. Map to the most specific mCODE STU4 profile using ontology models
3. Use official mCODE value sets and coding systems (SNOMED CT, LOINC, ICD-10-CM, HGNC)
4. Include mapping confidence (1.0=explicit, 0.8=clear, 0.6=inferred)
5. Provide exact source text fragments for traceability
6. Create structured mCODE element mappings following FHIR patterns
7. For demographics: Extract birth sex, race, ethnicity explicitly
8. For staging: Map TNM categories to TNMStageGroup enum values
9. For biomarkers: Use ReceptorStatus enum (POSITIVE/NEGATIVE/UNKNOWN)
10. For treatments: Include dosage, frequency, route, duration details
11. For labs/vitals: Extract specific values with units and reference ranges
12. For comorbidities/family history: Map to appropriate SNOMED CT codes

**CRITICAL INSTRUCTIONS (mCODE STU4 Ontology):**
1. Map to the most specific mCODE STU4 profile using ontology models
2. Use official mCODE value sets and coding systems (SNOMED CT, LOINC, ICD-10-CM, HGNC)
3. Include confidence scores (1.0=explicit, 0.8=clear, 0.6=inferred)
4. Provide exact source text fragments for traceability
5. Return ONLY valid JSON, no additional text
6. If no mappings possible, return empty arrays but preserve JSON structure
7. Use exact mCODE STU4 element names: McodePatient, CancerCondition, CancerStaging, TumorMarkerTest, ECOGPerformanceStatusObservation, CancerRelatedMedicationStatement, CancerRelatedSurgicalProcedure, CancerRelatedRadiationProcedure, ComorbidCondition, FamilyMemberHistory, GenomicVariant, CancerDiseaseStatus
8. Follow FHIR resource patterns with proper coding and extensions
9. For demographics: Use BirthSex, USCoreRace, USCoreEthnicity extensions
10. For staging: Extract TNM categories and map to TNMStageGroup enum values
11. For biomarkers: Map to ReceptorStatus enum and specific LOINC codes
12. For treatments: Include medication dosages, administration details, procedure types
13. Properly escape any special characters within string values
14. Ensure all JSON is valid and parseable
15. Do not include any text outside of the JSON structure