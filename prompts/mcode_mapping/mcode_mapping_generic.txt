**TASK: Map extracted clinical entities to mCODE data elements**

You are an expert clinical data mapper. Map the extracted clinical entities to the appropriate mCODE (Minimal Common Oncology Data Elements) data model.

**INPUT:**
- Extracted clinical entities in JSON format
- Clinical trial eligibility criteria text

**REQUIRED OUTPUT FORMAT (Pure JSON):**
{{
    "mcode_mappings": [
        {{
            "source_entity_index": 0,
            "mcode_element": "mCODE element name (e.g., 'CancerCondition', 'GenomicVariant', 'CancerDiseaseStatus')",
            "value": "mapped value according to mCODE value sets",
            "confidence": 0.0-1.0,
            "mapping_rationale": "brief explanation of mapping decision"
        }}
    ],
    "unmapped_entities": [
        {{
            "entity_index": 0,
            "reason": "why entity could not be mapped to mCODE"
        }}
    ],
    "metadata": {{
        "mapping_method": "llm_based",
        "total_entities": 10,
        "mapped_count": 8,
        "unmapped_count": 2
    }}
}}

**MAPPING RULES:**
1. Map to the most specific mCODE element possible
2. Use official mCODE value sets when available
3. Include mapping confidence based on clarity of match
4. Provide rationale for each mapping decision
5. List entities that cannot be mapped with explanation
6. Preserve source entity references for traceability

**COMMON MCODE ELEMENTS TO MAP TO:**
- CancerCondition: Primary cancer diagnoses, cancer types (maps to Condition resource)
- CancerDiseaseStatus: Disease status (active, remission, progression) (maps to Observation resource)
- TNMClinicalStageGroup: Cancer staging (I, II, III, IV) (maps to Observation resource)
- GenomicVariant: Genetic mutations, biomarkers (maps to Observation resource)
- CancerRelatedMedication: Chemotherapy, targeted therapies (maps to MedicationStatement resource)
- CancerRelatedProcedure: Surgical procedures, biopsies (maps to Procedure resource)
- ECOGPerformanceStatus: Performance status scores (maps to Observation resource)
- KarnofskyPerformanceStatus: Karnofsky scores (maps to Observation resource)

**CRITICAL INSTRUCTIONS:**
1. Map to the most specific mCODE element available
2. Use official mCODE value sets and coding systems
3. Include confidence scores for mapping decisions
4. Provide clear rationale for each mapping
5. Identify and explain unmapped entities
6. Return ONLY valid JSON, no additional text
7. If no mappings possible, return empty arrays but preserve JSON structure
8. Use exact mCODE element names: CancerCondition, GenomicVariant, CancerDiseaseStatus, TNMClinicalStageGroup, CancerRelatedMedication, CancerRelatedProcedure, ECOGPerformanceStatus, KarnofskyPerformanceStatus

**EXTRACTED ENTITIES TO MAP:**
{entities_json}

**TRIAL CONTEXT:**
{trial_context}